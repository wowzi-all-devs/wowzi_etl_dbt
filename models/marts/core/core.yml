version: 2

models:
  - name: influencer_facts
    description: "Influencer model denormalized"
    columns:
      - name: influencer_id
        description: "The primary key for this table"
        tests:
          - unique
          - not_null
      - name: date_account_created
        description: "Date account was created"
      - name: first_name
      - name: last_name
      - name: personal_id_number
      - name: email
      - name: email_verified
      - name: mobile_number
      - name: mobile_number_verified
      - name: gender
      - name: country
      - name: location
      - name: dob
      - name: income_category
      - name: income_currency
      - name: smileidentity_status
      - name: total_campaigns
      - name: total_net_payment
      - name: first_campaign_date
      - name: last_campaign_date
      - name: offered_jobs
      - name: total_accepted
      - name: total_expired
      - name: total_not_accepted
      - name: age_range
      - name: tax_external_id
      - name: job_activity
      - name: job_eligibility
      - name: username_INSTAGRAM
      - name: followers_count_INSTAGRAM
      - name: channel_status_INSTAGRAM
      - name: influencer_type_INSTAGRAM
      - name: username_FACEBOOK
      - name: followers_count_FACEBOOK
      - name: channel_status_FACEBOOK
      - name: influencer_type_FACEBOOK
      - name: username_TWITTER
      - name: followers_count_TWITTER
      - name: channel_status_TWITTER
      - name: influencer_type_TWITTER
      - name: username_LINKEDIN
      - name: followers_count_LINKEDIN
      - name: channel_status_LINKEDIN
      - name: influencer_type_LINKEDIN
      - name: username_TIKTOK
      - name: followers_count_TIKTOK
      - name: channel_status_TIKTOK
      - name: influencer_type_TIKTOK

 

  - name: job_facts
    description: "Jobs table"
    columns:
      - name: job_id
        description: "The primary key for this table"
        tests:
          - unique
          - not_null
      - name: campaign_id
        tests:
          - not_null
          - relationships:
              to: ref('campaigns')
              field: campaign_id
      - name: influencer_id
        tests:
          - not_null
          - relationships:
              to: ref('influencers')
              field: influencer_id
      - name: invitation_status
        tests:
          - accepted_values:
              values: ['ACCEPTED', 'NOT_ACCEPTED', 'EXPIRED', 'OFFERED']
      - name: payment_status
      - name: offer_creation_time
      - name: offer_expire_time
      - name: submission_expire_time
      - name: review_expire_time
      - name: offer_acception_or_rejection_time
      - name: creation_time
      - name: max_influencer_tasks_count
      - name: max_influencer_amounts_list
  
  #TODO Rename this and move to core yml
  - name: dim_advertisers
    description: "Advertiser model denormalized"
    columns:
      - name: advertiser_id
        description: "The primary key for this table"
        tests:
          - unique
          - not_null
  # - name: advertisers
  #   description: "Advertisers model denormalized"
  #   columns:
  #       - name: advertiser_id
  #         description: "The primary key for this table"
  #         tests:
  #           - unique
  #           - not_null
  #       - name: company_id
  #         tests:
  #           - not_null
  #           - relationships:
  #               to: ref('companies')
  #               field: id
  #       - name: date_account_created
  #       - name: first_name
  #       - name: last_name
  #       - name: email
  #       - name: role
  #       - name: phone
  #       - name: gender
  #       - name: country
  #       - name: location
  #       - name: city
  #       - name: personal_id_number
  #       - name: dob
  #       - name: avatar
  #       - name: name
  #       - name: company_type
  #       - name: company_size
  #       - name: company_industry
  #       - name: kra_pin
  #       - name: address
  #       - name: postal_code
  #       - name: outgoing_currency
  #       - name: company_payment_method
  #       - name: company_payment_plan
  #       - name: company_creation_date
  #       - name: agency
  #       - name: agency_commission
  #       - name: total_accepted_jobs
  #       - name: total_expired_jobs
  #       - name: total_not_accepted_jobs
  #       - name: first_campaign_date
  #       - name: last_campaign_date
  #       - name: total_campaigns
  #       - name: total_budget_allocation
  #       - name: total_male_campaigns
  #       - name: total_female_campaigns
  #       - name: total_mixed_campaigns
  #       - name: total_bonus_amount